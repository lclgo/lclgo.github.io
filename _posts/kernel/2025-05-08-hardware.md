---
layout: post
title: "硬件相关知识"
category: kernel
date: 2025-05-08 22:00:00 +0800
---

## cache一致性

<https://zhuanlan.zhihu.com/p/94811032>

* snooping机制（监听协议）：广播，对带宽的压力较大，适用于小规模的NUMA系统
* directory-based机制（目录协议）：单播，减轻带宽压力，适用于大规模的NUMA系统

依赖缓存一致性协议MESI。

<https://zhuanlan.zhihu.com/p/95435168>

**MSI：Modified，Shared，Invalid** 初始状态下所有CPU的cacheline状态为Shared；CPU0更新cacheline后，CPU0状态更新为Modified，对于指向同一块内存的cacheline，其他所有CPU状态Shared -> Invalid。

**MESI：Modified，Exclusive，Shared，Invalid**

